<html>

<head>
<title>HelloList java -prof Profile</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="default.css" type="text/css">
</head>

<body class="normal" bgcolor="#FFFFFF" text="#000000">
<h1 align="center">HelloList <code>java -prof</code> Profile</h1>
<table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
  <tr> 
    <td width="138" nowrap>Previous : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="145" nowrap>Up : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="269" nowrap>Next : <a href="hello-list-hprof-sample.html">HelloList <code>hprof</code> 
      Profile</a></td>
  </tr>
</table>
<p>This sample shows <code>java -prof</code> output from the sample program <a href="java/util/HelloList.java.txt">HelloList.java</a>. 
  At any time, you can click and drag on the diagram to give yourself a better 
  view by changing its orientation. </p>
<ol>
  <li>Click on the root (bottom-most) block to select the <code>&lt;root&gt;</code> 
    function. The base of every diagram is the <code>&lt;root&gt;</code> function. 
    All the program's top-level threads are displayed as children of <code>&lt;root&gt;</code>. 
    <p> By selecting the <code>&lt;root&gt;</code> function, and reading the Callee 
      table, you can determine that the program time consists primarily of the 
      <code>HelloList.main</code> function (almost 99%), though it also spends 
      a little time running <code>java.lang.ClassLoader.loadClassInternal</code>. 
  </li>
  <li>Adjust the slider down to '1', to show only 1 level of child function calls. 
    <p> If you look closely at the diagram, you can see that the <code>&lt;root&gt;</code> 
      function has two child blocks. The block for the <code>HelloList.main</code> 
      function is much larger than the one for <code>java.lang.ClassLoader.loadClassInternal</code>, 
      because much more time is spent in <code>HelloList.main</code>. 
  </li>
  <li>Now move the slider to '2', to show another level of function calls, and 
    click on the <code>HelloList.main</code> block in the diagram. If it helps 
    you to get a better view of the diagram, click and drag the diagram to change 
    its orientation. 
    <p> This view shows the relative amounts of time taken by the <code>arrayAndString</code>, 
      <code>linkedAndString</code>, <code>arrayAndBuffer</code>, and <code>linkedAndBuffer</code> 
      functions. <code>arrayAndString</code> and <code>linkedAndString</code> 
      take about 42% of the time spent in <code>HelloList.main</code> each, whereas 
      <code>arrayAndBuffer</code> and <code>linkedAndBuffer</code> only take about 
      8% of the time. 
    <p> Already we can make 2 key observations: 
    <ol>
      <li>The functions which use <code>String</code> take much more time than 
        the ones that use <code>StringBuffer</code></li>
      <li>The functions which use <code>ArrayList</code> appear to take about 
        the same amount of time as the ones which use <code>LinkedList</code> 
    </ol>
  </li>
  <li>Double-click the <code>linkedAndString</code> block. Double-clicking makes 
    the selected block into the root of the diagram, so <code>linkedAndString</code> 
    is now the bottom block in the diagram. You can use the 'Back' and 'Forward' 
    buttons to move back and forth between diagrams. 
    <p> As we could have guessed, the majority of the time (91%) of the time spent 
      in <code>linkedAndString</code> is spent in <code>buildAsStrings</code>. 
      The rest of the time is about evenly split between adding items to the linked 
      list, and cloning the list at the end of the function. 
  </li>
  <li> This diagram also shows what happens inside <code>buildAsStrings</code>. 
    Move the slider up to '3' to show an additional level of function calls. 
    <p> There are now several different colors of blocks in the diagram. What 
      do the colors represent? All the blocks in the diagram are shaded between 
      blue and red according to how much of the time was spent in the function 
      itself ('exclusive time'). Exclusive time is the result of subtracting the 
      inclusive times of all a function's callees. 
    <p> The diagram shows that there are 3 important hot spots in the <code>buildAsStrings</code> 
      function: 
    <ol>
      <li><code>StringBuffer.&lt;init&gt;</code></li>
      <li><code>String.&lt;init&gt;</code></li>
      <li><code>String.getChars</code></li>
    </ol>
  </li>
  <li>Push the 'Root' button to set the root of the diagram back to the <code>&lt;root&gt;</code> 
    function. Move the slider to '2', then double-click the <code>linkedAndBuffer</code> 
    function to select it.
    <p> In the <code>linkedAndString</code> function, building the strings took 
      91% of the time. Here, the <code>buildAsBuffer</code> function only takes 
      about 75% of the time.
  </li>
  <li>By moving the slider up to '4' or higher, you can see the full picture for 
    how time is spent in <code>linkedAndBuffer</code>. </li>
</ol>

<table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
  <tr> 
    <td width="138" nowrap>Previous : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="145" nowrap>Up : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="269" nowrap>Next : <a href="hello-list-hprof-sample.html">HelloList 
      <code>hprof</code> Profile</a></td>
  </tr>
</table>
</body>
</html>