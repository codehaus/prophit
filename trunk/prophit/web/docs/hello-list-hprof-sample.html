<html><!-- #BeginTemplate "/Templates/prophit-general.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>prophIt: HelloList -hprof sample</title>
<!-- #EndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="java profile profiler hprof prof swing free gl4java opengl visualization visualizer cpu function time">
<script language="JavaScript">
<!--
function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);
// -->
</script>
<link rel="stylesheet" href="../default.css" type="text/css">
<STYLE>
	#topMenuLayer {border: solid; background-color: #dddddd; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #FFFFFF #AAAAAA #AAAAAA #AAAAAA}
	#HeadingLayer {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA}
	#leftcol {border: solid; background-color: #eeeeee; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #FFFFFF #AAAAAA #AAAAAA #AAAAAA}
	.TopMenu {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-variant: small-caps}
	A:link {color: blue}
	A:hover {color: red! important}
	A:active {color: red! important}
	#topMenuLayer A {text-decoration: none}
	#leftcol A {text-decoration: none}
	DIV.header {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA; background-color: #EBDEA9; font-family: Arial, Helvetica, sans serif; font-size: small; color: #333333; font-variant: small-caps; font-weight: bold }
	DIV.alert {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA; background-color: #FF9933; font-family: Arial, Helvetica, sans serif; font-size: small; color: #333333; font-variant: small-caps; font-weight: bold }
	BLOCKQUOTE.alert {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA }
	DIV.docnav {border: solid; border-bottom-width: 0px; border-top-width: 1px; border-left-width: 0px; border-right-width: 0px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA; font-family: Arial, Helvetica, sans serif; font-size: small; color: #333333; font-variant: small-caps; font-weight: normal }
	.news {font-size: small; font-family: "Courier New" }
	TD.FAQH { font-color: #333333; font-weight: bold; background-color: #EEEEEE}
	TD.FAQ {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA; font-size: x-small; font-color: #666666;  }
	DIV.FAQ {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA; font-size: x-small; font-color: #666666;  }
</STYLE>
</head>

<body bgcolor="#FFFFFF" text="#333333">
<div id="HeadingLayer">
  <table id="HeaderTable" width="100%" border="0" cellpadding="8" cellspacing="0"> 
    <tr>
  	  <td bgcolor="#EBDEA9" width="100%" > 
        <p><font size="6" face="Georgia, Times New Roman, Times, serif" color="#000000"><b><a href="../index.html" style="text-decoration: none"><font color="222222">proph<font face="Courier New, Courier, mono">It: 
          the Java profiling experts</font></font></a></b></font><br>
          <a href="http://prophit.westslopesoftware.com"><font color="#333333"> 
          prophIt.westslopesoftware.com<br>
    </font></a> </p>
	</td>
	</tr>
  </table>
</div>
<div id="topMenuLayer">
	
  <table cellspacing="0" cellpadding="4" width="100%">
    <tr>
			
      <td class="TopMenu"> Last Published: 03/12/2002 </td>
			<td>
				
        <div align="right"> <span class="TopMenu"><a href="../index.html">prophIt</a> 
          | <a href="index.html">Documentation</a> | <a href="../download.html">Download</a> 
          </span> </div>
			
        <font face="Arial, Helvetica, sans-serif"></font></td>
		</tr>
	</table> 
</div>
<div id="MAIN">
<table id="main" border="0" cellspacing="0" cellpadding="8" width="100%">
	<tr valign="top">
		
    <td id="leftcol" width="20%"> 
        <div id="LeftMenuLayer"> 
          <p><span class="MenuHeader">prophIt</span><br>
            <span class="MenuItem"> - <a href="../index.html">Home Page</a></span><span class="MenuItem"><br>
            - <a href="../prophit-overview.html">Overview</a><br>
            - <a href="../news.html">News and Status</a></span><span class="MenuItem"><br>
            </span><span class="MenuItem">- <a href="../release-history.html">Release History</a><br>
            - <a href="../product-plan.html">Future Releases </a><br>
            - <a href="../team.html">The Team</a><br>
            - <a href="../download.html">Download</a></span><span class="MenuItem"><br>
			- <a href="http://www.westslopesoftware.com/prophitbb" target="discussion">Discussion</a><br>
            </span></p>
          <p><span class="MenuHeader">Documentation</span><br>
            <span class="MenuItem">- <a href="index.html">Overview</a><br>
            &nbsp;&nbsp;&nbsp;- <a href="../quick-start.html">Quick Start</a><br>
			&nbsp;&nbsp;&nbsp;- <a href="concepts.html">Concepts</a><br>
			&nbsp;&nbsp;&nbsp;- <a href="profiler-types.html">Profilers</a><br>
			&nbsp;&nbsp;&nbsp;- <a href="samples.html">Samples</a><br>
			&nbsp;&nbsp;&nbsp;- <a href="glossary.html">Glossary</a><br>
            - <a href="faq.html">FAQ</a><br>
            </span> </p>
      </div>
		</td>
		<td>
			<div id="MainLayer">
			
			    <table name="MainTable" width="100%" bordercolor="#999999"  cellspacing="0" cellpadding="8" border="0">
					<tr>
						<td><div id="mainContentLayer">
						<!-- #BeginEditable "Main%20Content%20Region" --> 
                  <div class="header"><font size=4>HelloList hprof Profile</font></div>

                  <blockquote>
				  <p>Open this sample using the <i>File/Sample Profiles/hprof/HelloList</i> 
                    menu item. </p>
                  <p>This sample shows <code><a href="hprof.html">hprof</a></code> 
                    output from the sample program <a href="../java/util/HelloList.java.txt">HelloList.java</a>. 
                    This profile is similar to the <code><a href="hello-list-prof-sample.html">-prof 
                    Profile</a></code> of HelloList.java, but it was created using 
                    the <code>hprof</code> profiler rather than <code>java -prof</code>. 
                    See the documentation on <a href="profiler-types.html">Profiler 
                    Types</a> for more information on the difference between the 
                    two. This profile may be generated using the default settings
					of the <a href="http://antprof.sf.net/hprof.html">hprof Ant task</a>.
                    <ol>
                      <li>The HelloList program is a simple comparison of the 
                        performance of:
						<ul>
						<li>String and StringBuffer
						<li>ArrayList and LinkedList
						</ul>
						Take a quick read through the code to familiarize yourself with what it is doing.
						You may already know that StringBuffer is much faster than String. This simple example
						is only meant to introduce the prophIt GUI; rest assured that the real value of prophIt lies
						in finding much less common performance problems.
					  </li>
                      <li>Click on the <a href="glossary.html#diagram_root">diagram 
                        root</a> (the bottom-most block in the tower diagram) 
                        to select the <code>&lt;root&gt;</code> function. If it 
                        helps you to get a better view of the diagram, click and 
                        drag the diagram to change its orientation. The base of 
                        every diagram is the <code>&lt;root&gt;</code> function. 
                        All the program's top-level threads are displayed as <a href="glossary.html#callee">callees</a> 
                        of <code>&lt;root&gt;</code>. 
                        <p> By selecting the <code>&lt;root&gt;</code> function, 
                          and reading the Callee table, you can determine that 
                          the program time consists primarily the <code>arrayAndString</code>, 
                          <code>linkedAndString</code>, <code>arrayAndBuffer</code>, 
                          and <code>linkedAndBuffer</code> functions. 
                      </li>
                      <li>Adjust the <a href="glossary.html#depth_slider">depth 
                        slider </a>down to '1', to show only 1 level of callees. 
                        <p> This view shows the relative amounts of time taken 
                          by the <code>arrayAndString</code>, <code>linkedAndString</code>, 
                          <code>arrayAndBuffer</code>, and <code>linkedAndBuffer</code> 
                          functions. <code>arrayAndString</code> and <code>linkedAndString</code> 
                          take about 40% of the time spent in <code>HelloList.main</code> 
                          each, whereas <code>arrayAndBuffer</code> and <code>linkedAndBuffer</code> 
                          only take about 10% of the time each. 
                      </li>
                      <li> 
                        <p> Already we can make 2 key observations: 
                        <ol>
                          <li>The functions which use <code>String</code> take 
                            much more time than the ones that use <code>StringBuffer</code></li>
                          <li>The functions which use <code>ArrayList</code> appear 
                            to take about the same amount of time as the ones 
                            which use <code>LinkedList</code>, but both <code>ArrayList</code> 
                            functions are slightly faster than their <code>LinkedList</code> 
                            counterparts. 
                        </ol>
                      </li>
                      <li>Double-click the <code>linkedAndString</code> block. 
                        Double-clicking makes the selected block into the <a href="glossary.html#diagram_root">diagram 
                        root</a>, so <code>linkedAndString</code> is now the bottom 
                        block in the diagram. You can use the 'Back' and 'Forward' 
                        buttons to move back and forth between diagrams. 
                        <p> As we could have guessed, the majority of the time 
                          (96%) of the time spent in <code>linkedAndString</code> 
                          is spent in <code>buildAsStrings</code>. The rest of 
                          the time is split between adding items to the linked 
                          list, and cloning the list at the end of the function. 
                      </li>
                      <li> This diagram also shows what happens inside <code>buildAsStrings</code>. 
                        Move the depth slider up to '3' to show more of the call 
                        graph. 
                        <p> There are now several different colors of blocks in 
                          the diagram. What do the colors represent? All the blocks 
                          in the diagram are shaded from light to dark according 
                          to how much of the time was spent in the function itself 
                          ('<a href="glossary.html#exclusive">exclusive time</a>'). 
                        <p> The diagram shows that there are 3 important hot spots 
                          in the <code>buildAsStrings</code> function: 
                        <ol>
                          <li><code>StringBuffer.append</code></li>
                          <li><code>StringBuffer.toString</code></li>
                          <li><code>StringBuffer.&lt;init&gt;</code></li>
                        </ol>
                      </li>
                      <li>Push the 'Root' button to set the root of the diagram 
                        back to the <code>&lt;root&gt;</code> function. Move the 
                        slider to '1', then double-click the <code>linkedAndBuffer</code> 
                        function to focus on it and re-draw the diagram. 
                        <p> In the <code>linkedAndString</code> function, building 
                          the strings took 96% of the time. Here, the <code>buildAsBuffer</code> 
                          function only takes about 87% of the time. 
                      </li>
                      <li>By moving the slider up its maximum value, you can see 
                        the full picture for how time is spent in <code>linkedAndBuffer</code>. 
                        Use the 'Back', 'Forward', 'Parent', and 'Root' buttons 
                        to <a href="concepts.html#navigation">navigate</a> between 
                        the views that you create. 
                        <p> At all times, the function that you have currently 
                          selected (by clicking or double-clicking on it) is highlighted. 
                          Other places in the program where the selected function 
                          was invoked are highlighted in a similar but different 
                          color. 
                      </li>
                      <li> 
                        <p>One of the benefits of <code>hprof</code> is that it 
                          can capture more stack levels (in this case, 6, as specified 
                          by <code>depth=6</code>) than <code>-prof</code>. Use 
                          the 'Root' button to show the entire program in the 
                          diagram, then set the number of displayed levels in 
                          the call graph to '2' using the slider. 
                        <P>Double-click one of the <code>buildAsStrings</code> 
                          functions. Make note of the times and percentages listed 
                          for its callees (<code>StringBuffer.append</code>, <code>StringBuffer.toString</code>, 
                          etc). Then go 'Back' and double-click on the other <code>buildAsStrings</code> 
                          function (it will be highlighted). Note that this invocation 
                          of <code>buildAsStrings</code> has the same callees, 
                          but the times are slighly different. <code>-prof</code> 
                          profiles do not show such distinctions, because it only 
                          captures 2 levels of stack depth. <code>-prof</code> 
                          lumps all the time spent in the callees of <code>buildAsStrings</code> 
                          into one set of data. It does not differentiate based 
                          on the caller of <code>buildAsStrings</code>. 
                        <P> Therefore, the capability to show different data for 
                          different invocations of the same function is not available 
                          with <code>-prof</code>; you have to use <code>hprof</code> 
                          to get it. And you have to set the <code>depth</code> 
                          option to a large enough number to ensure that the different 
                          invocations will have different call stacks. In this 
                          case, <code>depth=3</code> would have been sufficient. 
                          <code>depth=6</code> seems to be enough for most cases, 
                          but you can experiment with this parameter. The larger 
                          value you used for the <code>depth</code> option, the 
                          longer it will take to load the profile data file and 
                          the larger it will be (both on disk and in memory). 
                      </li>
                    </ol>
				  </blockquote>
		  <div class="docnav" align="center"> Previous : <a href="samples.html">Samples</a>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Up : <a href="samples.html">Samples</a> 
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Next : <a href="hsqldb-hprof-sample.html">HSQLDB 
                    <code>hprof</code> Profile</a>&nbsp;&nbsp; </div>

                  <!-- #EndEditable -->
						</div></td>
					</tr>
				</table>
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
				  <tr>
					
              <td></td>
				  </tr>
				</table>
			</div>
		
		</td>
	</tr>
</table>
</div>
<div id="footer">
<table border="0" width="100%">
<tr>
      <td> 
        <div id="wsswFooter" align="bottom"> 
          <p class="MenuItem"><a href="http://www.westslopesoftware.com" target=_blank><img src="../assets/wsswLogo.jpg" width="673" height="99" border="0"></a> 
          </p>
        </div>
</td>
      <td align="right"> 
        <div id="ironworksFooter" align="bottom"> 
        <p class="MenuItem"><font size="+1"><a href="http://www.ironworks.cc">Ironworks.cc</a></font></p>
      </div>
</td>
</tr>
</table>
<p>&nbsp;</p>
</div></body>
<!-- #EndTemplate --></html>
