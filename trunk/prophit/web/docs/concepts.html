<html><!-- #BeginTemplate "/Templates/prophit-general.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>prophIt: prophIt Concepts</title>
<!-- #EndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript">
<!--
function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);
// -->
</script>
<link rel="stylesheet" href="../default.css" type="text/css">
<STYLE>
	#topMenuLayer {border: solid; background-color: #dddddd; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #FFFFFF #AAAAAA #AAAAAA #AAAAAA}
	#HeadingLayer {border: solid; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #AAAAAA #AAAAAA #AAAAAA #AAAAAA}
	#leftcol {border: solid; background-color: #eeeeee; border-bottom-width: 1px; border-top-width: 1px; border-left-width: 1px; border-right-width: 1px; border-color: #FFFFFF #AAAAAA #AAAAAA #AAAAAA}
	.TopMenu {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-variant: small-caps}
	A:link {color: blue}
	A:hover {color: red! important}
	A:active {color: red! important}
	#topMenuLayer A {text-decoration: none}
	#leftcol A {text-decoration: none}
	DIV.header {background-color: #EBDEA9; font-family: Arial, Helvetica, sans serif; font-size: small; color: #333333; font-variant: small-caps; font-weight: bold }
	.news {font-size: 2; font-family: "Courier New" }
</STYLE>
</head>

<body bgcolor="#FFFFFF" text="#333333">
<div id="HeadingLayer"> <font face="   "></font>
<table id="HeaderTable" width="100%" border="0" cellpadding="8" cellspacing="0">
    <tr>
  	  <td bgcolor="#EBDEA9" width="100%" > 
        <p><font size="6" face="Georgia, Times New Roman, Times, serif" color="#000000"><b><a href="../index.html" style="text-decoration: none"><font color="222222">proph<font face="Courier New, Courier, mono">It</font></font></a></b></font> 
          <br>
          <a href="http://prophit.westslopesoftware.com"><font color="#333333"> 
          prophIt.westslopesoftware.com<br>
    </font></a> </p>
	</td>
	</tr>
  </table>
</div>
<div id="topMenuLayer">
	
  <table cellspacing="0" cellpadding="4" width="100%">
    <tr>
			
      <td class="TopMenu"> Last Published: @@date </td>
			<td>
				
        <div align="right"> 
		<span class="TopMenu"><a href="../index.html">prophIt</a> 
          | <a href="index.html">Documentation</a> | <a href="../download.html">Download</a> 
        </span>
		</div>
			
        <font face="Arial, Helvetica, sans-serif"></font></td>
		</tr>
	</table> 
</div>
<div id="MAIN">
<table id="main" border="0" cellspacing="0" cellpadding="8" width="100%">
	<tr valign="top">
		
    <td id="leftcol" width="20%"> 
        <div id="LeftMenuLayer"> 
          <p><span class="MenuHeader">prophIt</span><br>
            <span class="MenuItem"> - <a href="../index.html">Home Page</a><br>
            - <a href="../news.html">News and Status</a><br>
            - <a href="../team.html">The Team</a><br>
            - <a href="../download.html">Get prophIt Now!</a></span><span class="MenuItem"><br>
            </span></p>
          <p><span class="MenuHeader">Documentation</span><br>
            <span class="MenuItem">- <a href="index.html">Overview</a><br>
            - <a href="../quick-start.html">Getting Started</a><br>
          </span> </p>
      </div>
		</td>
		<td>
			<div id="MainLayer">
			
			    <table name="MainTable" width="100%" bordercolor="#999999"  cellspacing="0" cellpadding="8" border="0">
					<tr>
						<td><div id="mainContentLayer">
						<!-- #BeginEditable "Main%20Content%20Region" --> 
                  <div class="header"><font size=4>prophIt Concepts</font></div>
                  <!--table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
                    <tr> 
                      <td width="160" nowrap>Previous : <a href="../quick-start.html">Quick 
                        Start</a></td>
                      <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
                      <td width="200" nowrap>Up : <a href="index.html">prophIt Documentation</a></td>
                      <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
                      <td width="234" nowrap>Next : <a href="profiler-types.html">Supported 
                        Profilers</a></td>
                    </tr>
                  </table--><br>
                  <div class="header">Overview</div>
                  <p>prophIt is an innovative new way to visualize and understand 
                    profiler data. The primary visual paradigm used by most profiler 
                    user interfaces (UIs) is the tree view. A tree view is used 
                    to display the program's call graph, with child nodes in the 
                    tree view representing <a href="glossary.html#callee">callee</a> 
                    functions. Most of the screen real estate is taken up by text 
                    and whitespace; very little data is presented to the user 
                    and it is very hard to mine the potentially rich profiler 
                    data for useful nuggets of information. </p>
                  <p>To improve on the tree view, prophIt makes the data primary, 
                    and the text and labels secondary. <!-- #BeginLibraryItem "/Library/quick-description.lbi" -->The prophIt user interface uses a dense, color-coded, 3-dimensional <a href="concepts.html#screenshot">tower 
diagram</a> to present much more information on the screen than the traditional 
tree view. Instead of cluttering the screen, labels and numbers are placed out 
of the way of the data and are made available on demand. prophIt enables you to 
use your powers of visual observation and image analysis to find important features 
of your profile, then provides you with the data you need to improve your programs.<!-- #EndLibraryItem --></p>
                  <div class="header">Call Graphs</div>
                  <p>The operation of all computer programs can be represented 
                    as a call graph. Consider a simple database test program which 
                    has the following methods: </p>
                  <ul>
                    <li><code>main</code> : the entry point of the program</li>
                    <li><code>init</code> : initializes the database with some 
                      standard template data</li>
                    <li><code>test</code> : function which implements the tests</li>
                    <li><code>DBExec</code> : function which parses and executes 
                      a SQL statement</li>
                    <li><code>insert</code> : inserts a table row</li>
                    <li><code>update</code> : updates the data in a table row</li>
                    <li><code>write</code> : writes the data to the data store 
                      (memory or hard disk)</li>
                  </ul>
                  Suppose that the call graph for this program looks like the 
                  following: 
                  <p> <img src="../assets/call-graph.gif"> </p>
                  <p>The numbers in parentheses are used to identify different 
                    invocations of the same function. For instance, <code>DBExec</code> 
                    is invoked from <code>init</code> and from <code>test</code>.</p>
                  <p>Each of these function invocations takes a certain amount 
                    of CPU time. This CPU time is what profilers typically measure, 
                    one way or another. (See <a href="http://www.tarma.com/articles/index.htm#1997nov">here</a> 
                    for an quick read on different profiling techniques). 
                    <!-- TODO: add the call times to the diagram -->
                  </p>
                  <div class="header">Tree View Profilers</div>
                  <p>Most profiler user interfaces look very similar. The primary 
                    display is a tree view that looks a lot like the diagram above. 
                    Each function call is represented as a node in the tree, and 
                    the amount of time spent in each function is typically written 
                    next to the name of the function. The number of invocations 
                    of that function may also be shown. There is also often a 
                    secondary tree view which shows 'hotspots'. A hot spot is 
                    a function in which the program spent a lot of time. In our 
                    database example, <code>write</code> is probably a hotspot. 
                    The hotspot display is typically a listing of the program 
                    hotspots, as best the profile visualizer can determine them, 
                    with the callers of each hotspot drawn in a tree that is essentially 
                    an inverted view of the call graph. </p>
                  <h2>Problems With The 'Tree View' Approach</h2>
                  <p>What's wrong with the tree view approach to profile visualization? 
                  </p>
                  <ol>
                    <li>Display density. A typical profile consists of hundreds 
                      or even thousands of functions, each of which may be called 
                      from many different places in the program, and each of which 
                      has its own associated CPU time and number of invocations. 
                      Yet, in the tree view approach, most of the screen real 
                      estate is occupied by text (the function names and times) 
                      and empty space. Only a small fraction of the program can 
                      be seen at once, and the most interesting data (the CPU 
                      times) are represented as text rather than as a diagram. 
                      The human eye and brain are very good at assimilating large 
                      amounts of information presented visually, if it is presented 
                      in a powerful way. The information density of the 'tree 
                      view' GUI is very low.</li>
                    <li>Cluttering of the data by labels. For the purposes of 
                      optimizing a program, the names of the functions are not 
                      important until the performance-critical aspects of the 
                      program have been identified. Yet in a tree view profiler, 
                      the timing data is obscured by copious amounts of text.</li>
                    <li>Inflexbility. The simple top-down call graph and bottom-up 
                      hotspot views of the data are all that is available. Many 
                      performance problems do not normally show up in these 2 
                      views. Yet there is no mechanism for mining the data for 
                      other, more subtle problems.</li>
                  </ol>
                  <div class="header">Profile Visualization Using prophIt</div>
                  <p>prophIt re-invents the visual display of profiler data using 
                    innovative and powerful new views of profiler data. By focusing 
                    on the data, rather than text, prophIt is able to present much 
                    more information to the user than a tree view display does. 
                  </p>
                  <a name="tower_diagram"> 
                  <h2>The Tower Diagram</h2>
                  </a> 
                  <p>The goal of the prophIt user interface is to present as much 
                    relevant data as possible, while displaying labels and numbers 
                    on demand. The 'tower diagram', shown below in the context 
                    of the prophIt application, replaces the tree view as the 
                    fundamental display paradigm.</p>
                  <img src="../assets/deep-profile.png"><a name="screenshot"></a> 
                  <p>The tower diagram has the following characteristics:</p>
                  <ul>
                    <li>Each block represents a function call in the context of 
                      its <a href="glossary.html#caller">caller</a>. The area 
                      of the block is proportional to its <a href="glossary.html#inclusive">inclusive 
                      time</a>.</li>
                    <li>The block with the white highlight is the 'selected function'. 
                      Blocks with yellow highlights are other invocations of the 
                      same function.</li>
                    <ul>
                      <li>The selected function is selected by single-clicking 
                        on it with the mouse</li>
                      <li>The tables on the right hand side of prophIt show detailed 
                        information about the selected function.</li>
                    </ul>
                    <li>All the <a href="glossary.html#callee">callee</a> functions 
                      of the selected function are rendered as blocks stacked 
                      on top of it. Since the area of each block is proportional 
                      to its inclusive time, and the sum of the inclusive times 
                      of all a functions callees cannot be greater than the inclusive 
                      time of the function itself, the callee blocks always fit 
                      within the area of their caller.</li>
                    <li>The entire diagram can be rotated by clicking-and-dragging 
                      on the diagram.</li>
                    <li>The slider bar at the top of prophIt shows the maximum 
                      call depth which is displayed in the diagram. In the example 
                      above, functions up to 14 calls deep are being displayed.</li>
                    <ul>
                      <li>The call depth can be expanded beyond 15 by clicking 
                        on the diagram and using the + and - keys</li>
                    </ul>
                    <li>The text at the bottom shows information about the function 
                      which is at the base of the diagram</li>
                    <ul>
                      <li>To re-draw the diagram with a different function as 
                        the base, double-click on that function's block in the 
                        diagram.</li>
                    </ul>
                  </ul>
                  <h2><a name="navigation">Navigation Buttons</a></h2>
                  <p>The buttons at the top of the application are all used to 
                    change the <a href="glossary.html#diagram_root">diagram root 
                    </a>of the tower diagram. When a new profile is opened in 
                    prophIt, the diagram root is always a function which has no 
                    callers. The <code>main</code> function of the program is 
                    always either the diagram root, or a callee of the diagram 
                    root. Other callees of the diagram root represent other threads.</p>
                  <dl> 
                    <dt>Back</dt>
                    <dd>Similar to a Back button in a web browser. Changes the 
                      diagram root back to its previous value.</dd>
                    <dt>Forward</dt>
                    <dd>Similar to a Forward button in a web browser. Un-does 
                      the effect of using the Back button. </dd>
                    <dt>Parent</dt>
                    <dd>Sets the diagram root to the <a href="glossary.html#caller">caller</a> 
                      of the current diagram root.</dd>
                    <dt>Root</dt>
                    <dd>Sets the diagram root to the root of the entire profile. 
                      This is the same view that appeared when the profile was 
                      first opened in prophIt.</dd>
                  </dl>
                  <p></p>
                  <a name="call_tables"> 
                  <h2>Call Tables</h2>
                  </a> 
                  <p>To the right of the Tower Diagram are the Call Tables. The 
                    call tables are used to show a detailed view of the <a href="glossary.html#selected_call">selected 
                    call</a>. Pause the mouse over any function name text to see 
                    a tool tip with the complete function name.</p>
                  <p>The top table shows detailed information about the selected 
                    call itself. Specifically:</p>
                  <ul>
                    <li>The name of the function and its Java class.</li>
                    <li>The <a href="glossary.html#inclusive">inclusive time</a> 
                      of <i>all </i>occurrances of the function in the current 
                      tower diagram.</li>
                    <ul>
                      <li>A function has multiple <i>occurances </i>when it is 
                        called in more than one place in the program</li>
                    </ul>
                    <li>The <a href="glossary.html#exclusive">exclusive time</a> 
                      of <i>all </i>occurrances of the function in the current 
                      tower diagram.</li>
                    <li>The sum of the number of invocations of <i>all occurrances</i> 
                      of the function in the current tower diagram</li>
                  </ul>
                  <p>The caller table shows:</p>
                  <ul>
                    <li>The name of each <a href="glossary.html#caller">caller</a> 
                      of the selected function which is visible in the current 
                      tower diagram.</li>
                    <li>The percentage of <a href="glossary.html#inclusive">inclusive 
                      time </a>that was spent as a callee of the caller.</li>
                  </ul>
                  <p>The callee table shows:</p>
                  <ul>
                    <li>The name of each <a href="glossary.html#callee">callee</a> 
                      of the selected function which is visible in the current 
                      tower diagram.</li>
                    <li>For each callee, the percentage of the total <a href="glossary.html#inclusive">inclusive 
                      time </a>for all callees that was spent in that callee. 
                      For example, suppose a function <code>main</code> takes 
                      100 seconds. 30 seconds are spent in <code>init</code>, 
                      and 20 seconds are spent in <code>test</code>. The remaining 
                      50 seconds are spent in <code>main</code> itself. The inclusive 
                      time of <code>main </code>is 100 seconds, the exclusive 
                      time is 50 seconds. 60% (30 / ( 20 + 30 )) of the total 
                      inclusive time of all callees was spent in <code>init</code>. 
                      The remaining 40% was spent in <code>test</code>.</li>
                  </ul>
                  <table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
                    <tr> 
                      <td width="160" nowrap>Previous : <a href="../quick-start.html">Quick 
                        Start</a></td>
                      <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
                      <td width="200" nowrap>Up : <a href="index.html">prophIt Documentation</a></td>
                      <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
                      <td width="234" nowrap>Next : <a href="profiler-types.html">Supported 
                        Profilers</a></td>
                    </tr>
                  </table>
                  <!-- #EndEditable -->
						</div></td>
					</tr>
				</table>
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
				  <tr>
					
              <td><a href="http://www.westslopesoftware.com"><img src="../assets/wsswLogo.jpg" width="673" height="99" border="0"></a></td>
				  </tr>
				</table>
			</div>
		
		</td>
	</tr>
</table>
</div>
<p>&nbsp;</p>
</body>
<!-- #EndTemplate --></html>
