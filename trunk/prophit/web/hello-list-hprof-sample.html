<html>
<head>
<title>HelloList hprof Profile</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="default.css" type="text/css"></head>

<body class="normal" bgcolor="#FFFFFF" text="#000000">

<h1 align="center">HelloList <code>hprof</code> Profile</h1>
<table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
  <tr> 
    <td width="232" nowrap>Previous : <a href="hello-list-prof-sample.html">HelloList -prof Profile</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="167" nowrap>Up : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="293" nowrap>Next : <a href="hsqldb-hprof-sample.html">HSQLDB <code>hprof</code> 
      Profile</a></td>
  </tr>
</table>


<p>Open this sample using the <i>File/Sample Profiles/hprof/HelloList</i> menu 
  item. </p>
<p>This sample shows <code><a href="hprof.html">hprof</a></code> output from the 
  sample program <a href="java/util/HelloList.java.txt">HelloList.java</a>. This 
  profile is similar to the <code><a href="hello-list-prof-sample.html">-prof Profile</a></code> 
  of HelloList.java, but it was created using the <code>hprof</code> profiler 
  rather than <code>java -prof</code>. See the documentation on <a href="profiler-types.html">Profiler 
  Types</a> for more information on the difference between the two. This profile 
  was generated by running the following command on JDK 1.3.1_02 for Windows:</p>
<pre>	java -classic -Xrunprof:cpu=samples,depth=6 util.HelloList</pre>
Explore the <a href="hello-list-prof-sample.html">HelloList java -prof Profile</a> 
before moving on to this one. 
<ol>
  <li>The first thing you may notice about this profile is that the 'time' numbers 
    are all smaller. For example, the inclusive time of <code>&lt;root&gt;</code> 
    is 9,671 in this profile, where as it was 87,027 for the <code>-prof</code> 
    profile. The <code>-prof</code> profile also took a lot longer to generate! 
    The <code>cpu=samples</code> mode of <code>hprof</code> is faster, but gathers 
    less data, than <code>cpu=times</code> or <code>-prof</code>.</li>
  <li>The <code>hprof</code> data agrees very well with the <code>-prof</code> 
    data. <code>arrayAndString</code> and <code>linkedAndString</code> take about 
    40% of the time spent in <code>HelloList.main</code> each, whereas <code>arrayAndBuffer</code> 
    and <code>linkedAndBuffer</code> only take about 10% of the time each. The 
    functions which use <code>ArrayList</code> are slightly faster than the ones 
    which use <code>LinkedList</code>. </li>
  <li> 
    <p>One of the benefits of <code>hprof</code> is that it can capture more stack 
      levels (in this case, 6, as specified by <code>depth=6</code>) than <code>-prof</code>. 
      Use the 'Root' button to show the entire program in the diagram, then set 
      the number of displayed levels in the call graph to '4' using the slider. 
    <P>Double-click one of the <code>buildAsStrings</code> functions. Make note 
      of the times and percentages listed for its callees (<code>StringBuffer.append</code>, 
      <code>StringBuffer.toString</code>, etc). Then go 'Back' and double-click 
      on the other <code>buildAsStrings</code> function (it will be highlighted 
      in yellow). Note that this invocation of <code>buildAsStrings</code> has 
      the same callees, but the times are slighly different. <code>-prof</code> 
      profiles do not show such distinctions, because <code>it </code>only captures 
      2 levels of stack depth. <code>-prof</code> lumps all the time spent in 
      the callees of <code>buildAsStrings</code> into one set of data. It does 
      not differentiate based on the caller of <code>buildAsStrings</code>.
    <P> Therefore, the capability to show different data for different invocations 
      of the same function is not available with <code>-prof</code>, you have 
      to use <code>hprof</code> to get it. And you have to set the <code>depth</code> 
      option to a large enough number to ensure that the different invocations 
      will have different call stacks. In this case, <code>depth=3</code> would 
      have been sufficient. <code>depth=6</code> seems to be enough for most cases, 
      but you can experiment with this parameter. 
  </ol>

<table border="0" cellspacing="0" cellpadding="0" bgcolor="eeeeee">
  <tr> 
    <td width="232" nowrap>Previous : <a href="hello-list-prof-sample.html">HelloList -prof Profile</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="167" nowrap>Up : <a href="samples.html">Samples</a></td>
    <td width="20" bgcolor="ffffff" nowrap>&nbsp;</td>
    <td width="293" nowrap>Next : <a href="hsqldb-hprof-sample.html">HSQLDB <code>hprof</code> 
      Profile</a></td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p></body>
</html>
